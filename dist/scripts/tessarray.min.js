// ------ Flickr Justified Layout ------
// Copyright 2016 Yahoo Inc.
// Licensed under the terms of the MIT license. Please see LICENSE file in the project root for terms.
require=function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require,module,exports){"use strict";var merge=require("merge");var Row=module.exports=function(params){this.top=params.top;this.left=params.left;this.width=params.width;this.spacing=params.spacing;this.targetRowHeight=params.targetRowHeight;this.targetRowHeightTolerance=params.targetRowHeightTolerance;this.minAspectRatio=this.width/params.targetRowHeight*(1-params.targetRowHeightTolerance);this.maxAspectRatio=this.width/params.targetRowHeight*(1+params.targetRowHeightTolerance);this.edgeCaseMinRowHeight=params.edgeCaseMinRowHeight||Number.NEGATIVE_INFINITY;this.edgeCaseMaxRowHeight=params.edgeCaseMaxRowHeight||Number.POSITIVE_INFINITY;this.rightToLeft=params.rightToLeft;this.isBreakoutRow=params.isBreakoutRow;this.items=[];this.height=0};Row.prototype={addItem:function addItem(itemData){var newItems=this.items.concat(itemData),rowWidthWithoutSpacing=this.width-(newItems.length-1)*this.spacing,newAspectRatio=newItems.reduce(function(sum,item){return sum+item.aspectRatio},0),targetAspectRatio=rowWidthWithoutSpacing/this.targetRowHeight,previousRowWidthWithoutSpacing,previousAspectRatio,previousTargetAspectRatio;if(this.isBreakoutRow){if(this.items.length===0){if(itemData.aspectRatio>=1){this.items.push(itemData);this.completeLayout(rowWidthWithoutSpacing/itemData.aspectRatio);return true}}}if(newAspectRatio===0){return false}if(newAspectRatio<this.minAspectRatio){this.items.push(merge(itemData));return true}else if(newAspectRatio>this.maxAspectRatio){if(this.items.length===0){this.items.push(merge(itemData));this.completeLayout(rowWidthWithoutSpacing/newAspectRatio);return true}previousRowWidthWithoutSpacing=this.width-(this.items.length-1)*this.spacing;previousAspectRatio=this.items.reduce(function(sum,item){return sum+item.aspectRatio},0);previousTargetAspectRatio=previousRowWidthWithoutSpacing/this.targetRowHeight;if(Math.abs(newAspectRatio-targetAspectRatio)>Math.abs(previousAspectRatio-previousTargetAspectRatio)){this.completeLayout(previousRowWidthWithoutSpacing/previousAspectRatio);return false}else{this.items.push(merge(itemData));this.completeLayout(rowWidthWithoutSpacing/newAspectRatio);return true}}else{this.items.push(merge(itemData));this.completeLayout(rowWidthWithoutSpacing/newAspectRatio);return true}},isLayoutComplete:function isLayoutComplete(){return this.height>0},completeLayout:function completeLayout(newHeight,justify){var itemWidthSum=this.rightToLeft?-this.left:this.left,rowWidthWithoutSpacing=this.width-(this.items.length-1)*this.spacing,clampedToNativeRatio,roundedHeight,clampedHeight,errorWidthPerItem,roundedCumulativeErrors,singleItemGeometry,self=this;if(typeof justify==="undefined"){justify=true}roundedHeight=Math.round(newHeight);clampedHeight=Math.max(this.edgeCaseMinRowHeight,Math.min(roundedHeight,this.edgeCaseMaxRowHeight));if(roundedHeight!==clampedHeight){this.height=clampedHeight;clampedToNativeRatio=rowWidthWithoutSpacing/clampedHeight/(rowWidthWithoutSpacing/roundedHeight)}else{this.height=roundedHeight;clampedToNativeRatio=1}this.items.forEach(function(item,i){item.top=self.top;item.width=Math.round(item.aspectRatio*self.height*clampedToNativeRatio);item.height=self.height;if(self.rightToLeft){item.left=self.width-itemWidthSum-item.width}else{item.left=itemWidthSum}itemWidthSum+=item.width+self.spacing});if(justify){if(!this.rightToLeft){itemWidthSum-=this.spacing+this.left}errorWidthPerItem=(itemWidthSum-this.width)/this.items.length;roundedCumulativeErrors=this.items.map(function(item,i){return Math.round((i+1)*errorWidthPerItem)});if(this.items.length===1){singleItemGeometry=this.items[0];singleItemGeometry.width-=Math.round(errorWidthPerItem);if(this.rightToLeft){singleItemGeometry.left+=Math.round(errorWidthPerItem)}}else{this.items.forEach(function(item,i){if(i>0){item.left-=roundedCumulativeErrors[i-1];item.width-=roundedCumulativeErrors[i]-roundedCumulativeErrors[i-1]}else{item.width-=roundedCumulativeErrors[i]}})}}},forceComplete:function forceComplete(fitToWidth,rowHeight){var rowWidthWithoutSpacing=this.width-(this.items.length-1)*this.spacing,currentAspectRatio=this.items.reduce(function(sum,item){return sum+item.aspectRatio},0);if(typeof rowHeight==="number"){this.completeLayout(rowHeight,false)}else if(fitToWidth){this.completeLayout(rowWidthWithoutSpacing/currentAspectRatio)}else{this.completeLayout(this.targetRowHeight,false)}},getItems:function getItems(){return this.items}}},{merge:2}],2:[function(require,module,exports){(function(isNode){var Public=function(clone){return merge(clone===true,false,arguments)},publicName="merge";Public.recursive=function(clone){return merge(clone===true,true,arguments)};Public.clone=function(input){var output=input,type=typeOf(input),index,size;if(type==="array"){output=[];size=input.length;for(index=0;index<size;++index)output[index]=Public.clone(input[index])}else if(type==="object"){output={};for(index in input)output[index]=Public.clone(input[index])}return output};function merge_recursive(base,extend){if(typeOf(base)!=="object")return extend;for(var key in extend){if(typeOf(base[key])==="object"&&typeOf(extend[key])==="object"){base[key]=merge_recursive(base[key],extend[key])}else{base[key]=extend[key]}}return base}function merge(clone,recursive,argv){var result=argv[0],size=argv.length;if(clone||typeOf(result)!=="object")result={};for(var index=0;index<size;++index){var item=argv[index],type=typeOf(item);if(type!=="object")continue;for(var key in item){var sitem=clone?Public.clone(item[key]):item[key];if(recursive){result[key]=merge_recursive(result[key],sitem)}else{result[key]=sitem}}}return result}function typeOf(input){return{}.toString.call(input).slice(8,-1).toLowerCase()}if(isNode){module.exports=Public}else{window[publicName]=Public}})(typeof module==="object"&&module&&typeof module.exports==="object"&&module.exports)},{}],"justified-layout":[function(require,module,exports){"use strict";var merge=require("merge"),Row=require("./row"),layoutConfig={},layoutData={},currentRow=false;module.exports=function(input){var config=arguments.length<=1||arguments[1]===undefined?{}:arguments[1];var defaults={containerWidth:1060,containerPadding:10,boxSpacing:10,targetRowHeight:320,targetRowHeightTolerance:.25,maxNumRows:Number.POSITIVE_INFINITY,forceAspectRatio:false,showWidows:true,fullWidthBreakoutRowCadence:false};layoutConfig=merge(defaults,config);var containerPadding={};var boxSpacing={};containerPadding.top=!isNaN(parseFloat(layoutConfig.containerPadding.top))?layoutConfig.containerPadding.top:layoutConfig.containerPadding;containerPadding.right=!isNaN(parseFloat(layoutConfig.containerPadding.right))?layoutConfig.containerPadding.right:layoutConfig.containerPadding;containerPadding.bottom=!isNaN(parseFloat(layoutConfig.containerPadding.bottom))?layoutConfig.containerPadding.bottom:layoutConfig.containerPadding;containerPadding.left=!isNaN(parseFloat(layoutConfig.containerPadding.left))?layoutConfig.containerPadding.left:layoutConfig.containerPadding;boxSpacing.horizontal=!isNaN(parseFloat(layoutConfig.boxSpacing.horizontal))?layoutConfig.boxSpacing.horizontal:layoutConfig.boxSpacing;boxSpacing.vertical=!isNaN(parseFloat(layoutConfig.boxSpacing.vertical))?layoutConfig.boxSpacing.vertical:layoutConfig.boxSpacing;layoutConfig.containerPadding=containerPadding;layoutConfig.boxSpacing=boxSpacing;layoutData._layoutItems=[];layoutData._awakeItems=[];layoutData._inViewportItems=[];layoutData._leadingOrphans=[];layoutData._trailingOrphans=[];layoutData._containerHeight=layoutConfig.containerPadding.top;layoutData._rows=[];layoutData._orphans=[];return computeLayout(input.map(function(item){if(item.width&&item.width){return{aspectRatio:item.width/item.height}}else{return{aspectRatio:item}}}))};function computeLayout(itemLayoutData){var notAddedNotComplete,laidOutItems=[],itemAdded,currentRow,nextToLastRowHeight;if(layoutConfig.forceAspectRatio){itemLayoutData.forEach(function(itemData){itemData.forcedAspectRatio=true;itemData.aspectRatio=layoutConfig.forceAspectRatio})}itemLayoutData.some(function(itemData,i){notAddedNotComplete=false;if(!currentRow){currentRow=createNewRow()}itemAdded=currentRow.addItem(itemData);if(currentRow.isLayoutComplete()){laidOutItems=laidOutItems.concat(addRow(currentRow));if(layoutData._rows.length>=layoutConfig.maxNumRows){currentRow=null;return true}currentRow=createNewRow();if(!itemAdded){itemAdded=currentRow.addItem(itemData);if(currentRow.isLayoutComplete()){laidOutItems=laidOutItems.concat(addRow(currentRow));if(layoutData._rows.length>=layoutConfig.maxNumRows){currentRow=null;return true}currentRow=createNewRow()}else if(!itemAdded){notAddedNotComplete=true}}}else{if(!itemAdded){notAddedNotComplete=true}}});if(currentRow&&currentRow.getItems().length&&layoutConfig.showWidows){if(layoutData._rows.length){if(layoutData._rows[layoutData._rows.length-1].isBreakoutRow){nextToLastRowHeight=layoutData._rows[layoutData._rows.length-1].targetRowHeight}else{nextToLastRowHeight=layoutData._rows[layoutData._rows.length-1].height}currentRow.forceComplete(false,nextToLastRowHeight||layoutConfig.targetRowHeight)}else{currentRow.forceComplete(false)}laidOutItems=laidOutItems.concat(addRow(currentRow))}layoutData._containerHeight=layoutData._containerHeight-layoutConfig.boxSpacing.vertical;layoutData._containerHeight=layoutData._containerHeight+layoutConfig.containerPadding.bottom;return{containerHeight:layoutData._containerHeight,boxes:layoutData._layoutItems}}function createNewRow(){if(layoutConfig.fullWidthBreakoutRowCadence!==false){if((layoutData._rows.length+1)%layoutConfig.fullWidthBreakoutRowCadence===0){var isBreakoutRow=true}}return new Row({top:layoutData._containerHeight,left:layoutConfig.containerPadding.left,width:layoutConfig.containerWidth-layoutConfig.containerPadding.left-layoutConfig.containerPadding.right,spacing:layoutConfig.boxSpacing.horizontal,targetRowHeight:layoutConfig.targetRowHeight,targetRowHeightTolerance:layoutConfig.targetRowHeightTolerance,edgeCaseMinRowHeight:.5*layoutConfig.targetRowHeight,edgeCaseMaxRowHeight:2*layoutConfig.targetRowHeight,rightToLeft:false,isBreakoutRow:isBreakoutRow})}function addRow(row){layoutData._rows.push(row);layoutData._layoutItems=layoutData._layoutItems.concat(row.getItems());layoutData._containerHeight+=row.height+layoutConfig.boxSpacing.vertical;return row.items}},{"./row":1,merge:2}]},{},[]);

// ------ Tessarray ------
// Copyright 2016 Dixon and Moe
// Licensed under the terms of the MIT license. Please see LICENSE file in the project root for terms.
var Tessarray=function(t,i){this.options=i||{},this.setOptionValue("containerClass",!1),this.setOptionValue("selectorClass",!1),this.setOptionValue("imageClass",!1),this.setOptionValue("defaultCategory",!1),this.setOptionValue("resize",!0),this.setOptionValue("timingFunction","ease-in"),this.setOptionValue("duration",375),this.setOptionValue("delay",0),this.setOptionValue("containerTransition",{duration:375,timingFunction:"ease-in",delay:0}),this.setOptionValue("flickr",{}),this.dimensionsLoaded=[],this.containerHasLoaded=!1,this.boxObjects=[],this.boxNodes=[];var s;s=this.options.containerClass?document.getElementsByClassName(this.options.containerClass)[0].getElementsByClassName(t):document.getElementsByClassName(t);for(var e="transform "+this.options.duration+"ms "+this.options.timingFunction+" "+this.options.delay+"ms, height "+this.options.duration+"ms "+this.options.timingFunction+" "+this.options.delay+"ms, left "+this.options.duration+"ms "+this.options.timingFunction+" "+this.options.delay+"ms, top "+this.options.duration+"ms "+this.options.timingFunction+" "+this.options.delay+"ms, width "+this.options.duration+"ms "+this.options.timingFunction+" "+this.options.delay+"ms",o=0;o<s.length;o++)this.boxNodes[o]=s[o],this.boxNodes[o].style.position="absolute",this.boxNodes[o].style.transition=e,this.boxNodes[o].style["-webkit-transition"]=e,this.boxObjects[o]=new TessarrayBox(s[o],o,this);if(this.specifiedContainerWidth=!!this.options.flickr.containerWidth,this.options.containerClass){if(this.container=document.getElementsByClassName(this.options.containerClass)[0],this.container.style.opacity="0",this.options.containerTransition){var e="opacity "+this.options.containerTransition.duration+"ms "+this.options.containerTransition.timingFunction+" "+this.options.containerTransition.delay+"ms";this.container.style.transition=e,this.container.style["-webkit-transition"]=e}this.setContainerWidth(),""===this.container.style.position&&(this.container.style.position="relative"),this.options.flickr.containerPadding?this.options.flickr.containerPadding.bottom?this.containerPaddingBottom=this.options.flickr.containerPadding.bottom:this.containerPaddingBottom=this.options.flickr.containerPadding:this.containerPaddingBottom=10,this.options.resize&&window.addEventListener("resize",this.renderIfNecessary.bind(this)),this.containerLoad()}if(this.options.selectorClass){this.selectors=document.getElementsByClassName(this.options.selectorClass);for(var o=0;o<this.selectors.length;o++){var n=this.selectors[o].getAttribute("data-category");this.selectors[o].addEventListener("click",this.sortByCategory.bind(this,n))}}},TessarrayBox=function(t,i,s){this.index=i,this.tessarray=s,this.classes={};for(var e=t.getAttribute("class").split(" "),o=0;o<e.length;o++)this.classes[e[o]]=t.dataset[e[o]]||null;if(s.options.imageClass?this.image=t.getElementsByClassName(s.options.imageClass)[0]:this.image=t.querySelector("img"),this.image.style.opacity="0",this.image.style.transition="opacity "+s.options.duration+"ms ease-in",s.dimensionsLoaded[i]=!1,t.getAttribute("data-aspect-ratio")||t.getAttribute("data-height")&&t.getAttribute("data-width"))this.givenAspectRatio=!0,this.setAspectRatio(s,t,i);else{this.givenAspectRatio=!1;var n=this.image.getAttribute("src"),a=new Image,r=this;a.onload=function(){r.aspectRatio=this.width/this.height,s.confirmLoad(i)},a.src=n}};Tessarray.prototype.setOptionValue=function(t,i){void 0===this.options[t]&&(this.options[t]=i)},Tessarray.prototype.setContainerWidth=function(){!this.specifiedContainerWidth&&this.options.containerClass&&(this.options.flickr.containerWidth=this.container.clientWidth)},TessarrayBox.prototype.setAspectRatio=function(t,i,s){i.getAttribute("data-aspect-ratio")?(this.aspectRatio=parseFloat(i.getAttribute("data-aspect-ratio")),t.confirmLoad(s)):i.getAttribute("data-height")&&i.getAttribute("data-width")&&(this.aspectRatio=parseFloat(i.getAttribute("data-height"))/parseFloat(i.getAttribute("data-width")),t.confirmLoad(s));var e=this.image.getAttribute("src"),o=new Image,n=this;o.onload=function(){n.image.style.opacity="",n.image.style.transition=""},o.src=e},Tessarray.prototype.confirmLoad=function(t){this.dimensionsLoaded[t]=!0,!this.deterimineIfBoxesLoaded()||!this.containerHasLoaded&&this.options.containerClass||this.initialRender()},Tessarray.prototype.containerLoad=function(){this.containerHasLoaded=!0,this.deterimineIfBoxesLoaded()&&this.initialRender()},Tessarray.prototype.deterimineIfBoxesLoaded=function(){for(var t=0;t<this.dimensionsLoaded.length;t++)if(!this.dimensionsLoaded[t])return!1;return!0},Tessarray.prototype.renderIfNecessary=function(){this.specifiedContainerWidth||this.options.flickr.containerWidth===this.container.clientWidth||this.renderBoxes()},Tessarray.prototype.initialRender=function(){this.options.containerClass&&(this.container.style.opacity="1"),this.options.selectorClass&&this.options.defaultCategory?this.sortByCategory(this.options.defaultCategory):(this.setSelectedBoxes(this.boxObjects),this.renderBoxes())},Tessarray.prototype.sortByCategory=function(t){if(""===t)var i=this.boxObjects;else var s=this.boxObjects.filter(function(i){return void 0!==i.classes[t]}),i=s.sort(function(i){return i.classes[t]});this.setSelectedBoxes(i),this.renderBoxes()},Tessarray.prototype.setSelectedBoxes=function(t){this.selectedBoxes=t,this.indexes?this.oldIndexes=this.indexes:this.oldIndexes=[],this.indexes=this.selectedBoxes.map(function(t){return t.index}),this.ratios=t.map(function(t){return parseFloat(t.aspectRatio)})},Tessarray.prototype.renderBoxes=function(){this.setContainerWidth();var t=require("justified-layout")(this.ratios,this.options.flickr);if(this.options.containerClass){var i=t.boxes[t.boxes.length-1].top+t.boxes[t.boxes.length-1].height+this.containerPaddingBottom;this.container.style.height=i.toString()+"px"}for(var s=0;s<this.boxNodes.length;s++){var e=this.boxNodes[s];if(this.indexes.includes(s)){var o=t.boxes[this.indexes.indexOf(s)];void 0===o?e.style.transform="scale(0)":(e.style.transform="scale(1)",e.style.height=o.height+"px",e.style.left=o.left+"px",e.style.top=o.top+"px",e.style.width=o.width+"px",this.boxObjects[s].givenAspectRatio||(this.boxObjects[s].image.style.opacity="",this.boxObjects[s].image.style.transition=""))}else this.oldIndexes.includes(s)?e.style.transform="scale(0)":e.style.transform="scale(0)"}};